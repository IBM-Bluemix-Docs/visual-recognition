---

copyright:
  years: 2015, 2017
lastupdated: "2017-11-30"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:pre: .pre}
{:codeblock: .codeblock}
{:screen: .screen}
{:javascript: .ph data-hd-programlang='javascript'}
{:java: .ph data-hd-programlang='java'}
{:python: .ph data-hd-programlang='python'}
{:swift: .ph data-hd-programlang='swift'}

# 分類器について

イメージを分類すると、Visual Recognition は、イメージで検出された一連のクラスを返します。その情報は、トレーニングに使用しているイメージから取り出されます。分類器は、クラスのグループです。

Visual Recognition には、トレーニングを行わずに高い精度の結果を提供できるいくつかの組み込み分類器が含まれています。また、カスタム分類器をトレーニングして、特殊なクラスを作成することもできます。

Clarifai 入門
> 予測のタイプは、入力の実行に使用するモデルに基づきます。例えば、「food」モデルで入力を実行すると、返される予測には、「food」モデルが知っている概念が含まれます。入力を「color」モデルで実行すると、イメージ内の主要な色に関する予測が返されます。

Clarifai
> Clarifai は、異なる方法で世界を「見る」、さまざまなモデルを提供しています。モデルには、概念のグループが含まれています。モデルが見るのは、そのモデルに含まれている概念のみになります。
>
> 自分と同じように世界を見るモデルがあったらと思うことがあります。この API は、それを可能にします。ユーザーは独自のモデルを作成し、独自のイメージと概念によってそれをトレーニングできます。自分が望むような方法で世界を見るようにモデルをトレーニングしたら、そのモデルを使用して予測を行うことができます。

## 標準装備の分類器

Visual Recognition には、トレーニングなしで高精度の結果を提供する一連の分類器が含まれています。現在組み込まれている分類器の名前は、`default`、`food`、および `explicit` です。

### default 分類器

default 分類器は、カテゴリーとサブカテゴリーに編成された、数千の可能なタグからクラスを返します。以下の最上位カテゴリーが返される可能性があります。

- 動物 (鳥類、は虫類、両生類などを含む)
- 個人、および人間本位の情報およびアクティビティー
- 食品 (調理済み食品および飲料を含む)
- 植物 (木、低木、水性植物、野菜を含む)
- スポーツ
- 自然 (さまざまなタイプの自然形成、地理的構造を含む)
- 運輸 (陸上、水上、航空)
- この他にも、家具、フルーツ、楽器、工具、色、ガジェット、装置、機器、武器、建物、構造と人口物、衣類、および花などがあります。

### food 分類器

default 分類器は、食品と飲料を識別できますが、組み込まれている `food` 分類器を指定できます。

### explicit 分類器

Visual Recognition は、イメージが一般使用に不適切かどうかを分類できます。`explicit` 分類器は、現在わいせつ画像と見なされる可能性があるイメージを識別します。この分類の一般的な省略語は _NSFW_ と呼ばれます。これは _not safe for work_ (職場閲覧注意) を意味します。

特定の数値より上または下のスコアは、そのイメージに不適切な表現があるかどうかを保証するものではありません。しかし、応答をイメージの初期フィルターとして使用し、その時点からさらなる分析を行うことができます。

応答:
```json
{
  "images": [
    {
      "classifiers": [
        {
          "classes": [
            {
              "class": "not explicit",
              "score": 0.704
            }
          ],
          "classifier_id": "explicit",
          "name": "explicit"
        }
      ],
      "resolved_url": "https://images-na.ssl-images-amazon.com/images/I/C1XxZKbHSrS._SL1000_.png",
      "source_url": "https://images-na.ssl-images-amazon.com/images/I/C1XxZKbHSrS._SL1000_.png"
    }
  ],
  "images_processed": 1
}
```
{: codeblock}

## 分類器の結合


## 応答のクラス階層

`/v3/classify` メソッドは、関連クラスの階層内でイメージを分類します。例えば、Beagle 犬のピクチャーは、「animal」に分類される可能性があり、さらに、関連する「dog」および「beagle」にも分類される可能性があります。関連クラス (この場合、「dog」と「beagle」) との正の一致は、親応答のスコアを上昇させます。この例では、応答には、3 つのクラス (「animal」、「dog」、および「beagle」) のすべてが含まれています。親クラス (「animal」) は関連クラス (「dog」と「beagle」) に一致するため、親クラスのスコアは上昇します。また、この親は、階層の親であることを示す「type\_hierarchy」でもあります。

## 大量の分類に関するガイドライン

多くのイメージを送信する際は、以下の方法でサービスの効率とパフォーマンスを最大化してください。

- イメージを 224 x 224 ピクセルにトリミングまたはサイズ変更します。現在、本サービスはこのサイズ用に最適化されています (ただし、変更される可能性はあります)。
    - イメージのアスペクト比が 2:1 より大きいか、1:2 より小さい場合、イメージをトリミングします。
    - 使用するのに一番重要な内容に応じて、イメージを切り取って複数の正方形のイメージにするか、イメージの中心部だけを含めることを検討します。
- 1 つの .zip ファイルで送信するイメージの数は最大 20 個にします。JPEG イメージと PNG イメージは圧縮ファイルのため、圧縮を使用する必要はありません。
- **classifier_ids** パラメーターを使用して、使用したい分類器のみを指定します。
- サービスは EXIF タグを読み取ってイメージを回転させますが、最良のスループットのためには、サービスによって回転する必要がないイメージを送信します (EXIF の **Orientation** タグを `1` に設定)。
